<!doctype html>
<html lang="en">
  <head>
      <meta charset="UTF-8">
      <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã –õ–µ–≥–µ–Ω–¥–∞ —Ñ–µ–Ω–∏–∫—Å–∞</title>
      <meta name="viewport" content="width=device-width">
      <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
      <link rel="stylesheet" type="text/css" href="style.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
      <link rel="stylesheet" type="text/css" href="css/bootstrap.css">
      <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
      <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

<!-- Don't use this in production: -->
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
  <body>

  <div id="root"></div>

  <script type="text/babel">
    const container = document.getElementById('root');
    const root = ReactDOM.createRoot(container);
    const levels = [1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 6, 6, 6, 6, 6, 7, 7, 7, 7, 7];



    class Child extends React.Component {
      constructor(props) {
        super(props);
        this.state = {
          data: {
            level: 0,
            sublevel: 0,
            type: 0
          },
          result: null,
          resultBalls: null,
          resultBallsOurs: null
        };
        this.handleChange = this.handleChange.bind(this);
      }

      calculateResult() {
        var result = null;

        var totalPoints =  0;
        for ( var i=1; i < levels.length + 2 - parseInt(this.state.data.level) - 40 + parseInt(this.state.data.type); i++) {
          totalPoints = totalPoints + levels[levels.length - i - 40 + parseInt(this.state.data.type)];
          // levels2.push(levels[levels.length - i]);
        }
        totalPoints = totalPoints - parseInt(this.state.data.sublevel);
        result = totalPoints * 2;
        var resultBalls = Math.floor(totalPoints / 3);
        var resultBallsOurs = (totalPoints % 3) * 2;

        this.setState({
          result: result,
          resultBalls: resultBalls,
          resultBallsOurs: resultBallsOurs
        });
      }

      handleChange (propertyName, event) {
        const data = this.state.data;
        data[propertyName] = event.target.value;
        this.calculateResult();
        this.setState({ data: data });
      }

        render() {
          return (
            <div className="form-style-3">
            <div className="chiid-title"> –°–∫–æ–ª—å–∫–æ –æ—Å—Ç–∞–ª–æ—Å—å —Ä–∞—Å—Ç–∏ –≤–æ—Å–ø–∏—Ç–∞–Ω–Ω–∏–∫—É?</div>
            <div div className="chiid-type-input-wrap">
              <div className="chiid-type-input">
              <label for="level"><span>–£—Ä–æ–≤–µ–Ω—å</span></label>
              <input type="number" name="level" onChange={this.handleChange.bind(this, "level")} value={this.state.data.level}/>
              </div>
              <div className="chiid-type-input">
              <label for="sublevel"><span>–ü–æ–¥ —É—Ä–æ–≤–µ–Ω—å</span></label>
              <input type="number" name="sublevel" onChange={this.handleChange.bind(this, "sublevel")} value={this.state.data.sublevel}/>
              </div>
</div>
              <label for="type"><span>–¢–∏–ø –≤–æ—Å–ø–∏—Ç–∞–Ω–Ω–∏–∫–∞</span></label>
              <select className="chiid-type-select" name="type" value={this.state.data.type} onChange={this.handleChange.bind(this, 'type')}>
                <option value="0">–ó–∞—É—Ä—è–¥–Ω—ã–π (10 —É—Ä)</option>
                <option value="10">–û–¥–∞—Ä–µ–Ω–Ω—ã–π (20 —É—Ä)</option>
                <option value="20">–û–¥–∏–Ω –∏–∑ —Ç—ã—Å—è—á–∏ (30 —É—Ä)</option>
                <option value="30">–†–µ–¥–∫–∏–π (40 —É—Ä)</option>
                <option value="40">–ì–µ–Ω–∏–π (50 —É—Ä)</option>
              </select>
              <div className="chiid-result">
              –†–µ–±–µ–Ω–∫—É –æ—Å—Ç–∞–ª–æ—Å—å —Ä–∞—Å—Ç–∏ {this.state.result} —á–∞—Å–æ–≤
              <div>
                –î–ª—è –≤–∑—Ä–æ—Å–ª–µ–Ω–∏—è –Ω—É–∂–Ω–æ üü¢ {this.state.resultBallsOurs === 0 &&
                  <span> —Ä–æ–≤–Ω–æ </span>
                }
                {this.state.resultBalls} —à–∞—Ä–æ–≤ –∂–∏–∑–Ω–µ–Ω–Ω–æ–π —Å–∏–ª—ã

                {this.state.resultBallsOurs > 0 &&
                  <span> –∏ –ø–æ–¥–æ–∂–¥–∞—Ç—å ‚åö {this.state.resultBallsOurs} —á–∞—Å–æ–≤</span>
                }
                .

              </div>
              </div>
            </div>
          );
        }
      }





      class Friends extends React.Component {
        constructor(props) {
          super(props);
          this.state = {
            data: {
              fix: 0,
              persent: 0,
              attSum: ''
            },
            result: 0,
            totalAtt: 0,
            fixAttAddition: null,
            persentAttAddition: null
          };
          this.handleChange = this.handleChange.bind(this);
        }

        calculateResult() {
          var result = 0;
          var fixAttAddition = 0;
          var persentAttAddition = 0;



          var totalAttString = this.state.data.attSum.replace(/[^0-9+,\s]/g,"");
          var arr = totalAttString.split('+');
          var x, i = 0;
          // var totalAtt = arr.map(i=>x+=i, x=0).reverse()[0];
          var totalAtt = 0;
           for (i = 0; i < arr.length; i++){
              totalAtt = parseInt(totalAtt) + parseInt(arr[i]);
           }

          if(totalAtt > 0) {
            fixAttAddition = this.state.data.fix / 2;
            persentAttAddition =  (this.state.data.persent * 100) / (totalAtt * 0.003);
            console.warn('fixAttAddition  ', fixAttAddition, 'persentAttAddition  ', persentAttAddition)
            if (fixAttAddition > persentAttAddition) {
              result = 1;
            }
            if (fixAttAddition < persentAttAddition) {
              result = 2;
            }
          }

          this.setState({
            result: 0,
            totalAtt: totalAtt,
            fixAttAddition: fixAttAddition,
            persentAttAddition: persentAttAddition
          });
        }

        handleChange (propertyName, event) {
          const data = this.state.data;
          data[propertyName] = event.target.value;
          this.calculateResult();
          this.setState({ data: data });
        }

          render() {
            return (
              <div className="form-style-3">
              <div className="chiid-title"> –ß—Ç–æ –≤—ã–≥–æ–¥–Ω–µ–µ –∫–∞—á–∞—Ç—å –Ω–∞ –æ—á–∫–∏ —Å–≤—è–∑–∏ –±–ª–∏–∑–∫–æ–≥–æ –¥—Ä—É–≥–∞?</div>
              <div className="help-text"> –†–∞—Å—á–µ—Ç –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –æ–¥–Ω–æ–π –ø–∞—Ä—ã —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –≤—Å–µ—Ö —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –ø–æ–º–æ—à–Ω–∏–∫–æ–≤: –≤—ã–≥–æ–¥–Ω–µ–µ –ø—Ä–æ—Ü–µ–Ω—Ç—ã –∏–ª–∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–æ–±–∞–≤–∫–∞</div>

              <label for="attSum"><span>–°—É–º–º–∞ –¥–≤—É—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –≤—Å–µ—Ö –ø–æ–º–æ—à–Ω–∏–∫–æ–≤ (–º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ –∑–Ω–∞–∫ + )</span></label>
              <textarea type="text" name="attSum" onChange={this.handleChange.bind(this, "attSum")} value={this.state.data.attSum}> </textarea>
              <div className="help-text"> –≤—Å–µ–≥–æ <b>{this.state.totalAtt}</b> –∞—Ç—Ä–∏–±—É—Ç–æ–≤ </div>
              <div className="chiid-type-input-wrap">
                <div className="chiid-type-input">
                <label for="fix"><span>–°—Ç–æ–∏–º–æ—Å—Ç—å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –Ω–∞–¥–±–∞–≤–∫–∏</span><b>(+100 * 2)</b></label>
                <input type="number" name="fix" onChange={this.handleChange.bind(this, "fix")} value={this.state.data.fix}/>
                {this.state.data.fix != 0 &&
                  <div className="help-text">
                  <div> + 200 –∞—Ç—Ä–∏–±—É—Ç–æ–≤</div>
                  <div> —Å—Ç–æ–∏–º–æ—Å—Ç—å 100 –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –∑–∞ <b>{(this.state.fixAttAddition)}</b> –æ—á–∫–æ–≤ —Å–≤—è–∑–∏</div>
                  </div>
                }
                {this.state.result === 1  &&
                  <div className="help-text-2"> üëç</div>
                }
                </div>
                <div className="chiid-type-input">
                <label for="persent"><span>–°—Ç–æ–∏–º–æ—Å—Ç—å –ø—Ä–æ—Ü–µ–Ω—Ç–Ω–æ–π –Ω–∞–¥–±–∞–≤–∫–∏</span><b>(+0.3% * 2)</b></label>
                <input type="number" name="persent" onChange={this.handleChange.bind(this, "persent")} value={this.state.data.persent}/>
                {this.state.data.persent != 0 &&
                  <div className="help-text">
                  <div> + {(this.state.totalAtt * 0.003)} –∞—Ç—Ä–∏–±—É—Ç–æ–≤</div>
                  <div> —Å—Ç–æ–∏–º–æ—Å—Ç—å 100 –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –∑–∞ <b>{(this.state.persentAttAddition).toFixed(2)}</b> –æ—á–∫–æ–≤ —Å–≤—è–∑–∏</div>
                  </div>
                }
                {this.state.result === 2 &&
                  <div className="help-text-2"> üëç</div>
                }
                </div>
  </div>

              </div>
            );
          }
        }


      class Tabs extends React.Component {
        constructor(props) {
          super(props);
          this.state = {
            activeTab: 1
          };
          this.handleChange = this.handleChange.bind(this);
        }

        handleChange (propertyName, event) {
          this.setState({ activeTab: dapropertyNameta });
        }

        render() {
          return (
            <div >

              <Child />
              <br /><br /><br /><br /><br /><br /><br /><br /><br />
              <Friends />
              <br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
            </div>
          )
        }
      }


      // root.render(React.createElement(Timer, null));
      root.render(React.createElement(Tabs, null));

    </script>
  </body>
</html>
